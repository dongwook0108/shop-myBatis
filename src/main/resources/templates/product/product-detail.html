<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments.html::head"></head>

<body>

<section class="preloader">
    <div class="spinner">
        <span class="sk-inner-circle"></span>
    </div>
</section>

<main>

    <nav th:replace="~{fragments.html::nav('product')}"></nav>

    <header class="site-header section-padding d-flex justify-content-center align-items-center">
        <div class="container">
            <div class="row">

                <div class="col-lg-10 col-12">
                    <h1>
                        <span class="d-block text-primary">We provide you</span>
                        <span class="d-block text-dark">Fashionable Stuffs</span>
                    </h1>
                </div>
            </div>
        </div>
    </header>

    <section class="product-detail section-padding">
        <div class="container">
            <div class="row" th:object="${product}">

                <div class="col-lg-6 col-12">
                    <div class="product-thumb">
                        <img th:src="@{'/images/product/upload/' + ${product.originalFileName}}"
                             class="img-fluid product-image" alt="">
                    </div>
                </div>

                <div class="col-lg-6 col-12">
                    <div class="product-info d-flex">
                        <div>
                            <h2 class="product-title mb-0" th:text="${product.name}"></h2>

                            <p class="product-p" th:text="${product.simpleDescription}"></p>
                        </div>

                        <small class="product-price text-muted ms-auto mt-auto mb-5"
                               th:text="${product.price}"></small>
                    </div>

                    <div class="product-description">

                        <strong class="d-block mt-4 mb-2">Description</strong>


                        <p class="lead mb-5" th:text="${product.description}"></p>
                    </div>

                    <div class="product-cart-thumb row">
                        <div class="col-lg-6 col-12">

                            <select class="form-select cart-form-select" id="inputGroupSelect01">
                                <option selected>수량</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                        </div>

                        <div class="col-lg-6 col-12 mt-4 mt-lg-0">
                            <button type="submit" class="btn custom-btn cart-btn"
                                    data-bs-toggle="modal"
                                    data-bs-target="#cart-modal">Add to Cart
                            </button>
                        </div>

                        <p>
                            <a href="#" class="product-additional-link">Details</a>

                            <a href="#" class="product-additional-link">Delivery and Payment</a>
                        </p>
                    </div>

                </div>

            </div>
        </div>
    </section>

    <section class="related-product section-padding border-top">
        <div class="container">
            <div class="row">

                <div class="col-12">
                    <h3 class="mb-5">You might also like</h3>
                </div>

                <div class="col-lg-4 col-12 mb-3">
                    <div class="product-thumb">
                        <a th:href="@{/product/detail}">
                            <img src="/images/product/evan-mcdougall-qnh1odlqOmk-unsplash.jpeg"
                                 class="img-fluid product-image" alt="">
                        </a>

                        <div class="product-top d-flex">
                            <span class="product-alert me-auto">New arrival</span>

                            <a href="#" class="bi-heart-fill product-icon"></a>
                        </div>

                        <div class="product-info d-flex">
                            <div>
                                <h5 class="product-title mb-0">
                                    <a th:href="@{product/detail}" class="product-title-link">Tree
                                        pot</a>
                                </h5>

                                <p class="product-p">Original package design from house</p>
                            </div>

                            <small class="product-price text-muted ms-auto mt-auto mb-5">$25</small>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-12 mb-3">
                    <div class="product-thumb">
                        <a th:href="@{product/detail}">
                            <img src="/images/product/jordan-nix-CkCUvwMXAac-unsplash.jpeg"
                                 class="img-fluid product-image" alt="">
                        </a>

                        <div class="product-top d-flex">
                            <span class="product-alert">Low Price</span>

                            <a href="#" class="bi-heart-fill product-icon ms-auto"></a>
                        </div>

                        <div class="product-info d-flex">
                            <div>
                                <h5 class="product-title mb-0">
                                    <a th:href="@{product/detail}" class="product-title-link">Fashion
                                        set</a>
                                </h5>

                                <p class="product-p">Costume package</p>
                            </div>

                            <small class="product-price text-muted ms-auto mt-auto mb-5">$35</small>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-12">
                    <div class="product-thumb">
                        <a th:href="@{product/detail}">
                            <img src="/images/product/nature-zen-3Dn1BZZv3m8-unsplash.jpeg"
                                 class="img-fluid product-image" alt="">
                        </a>

                        <div class="product-top d-flex">
                            <a href="#" class="bi-heart-fill product-icon ms-auto"></a>
                        </div>

                        <div class="product-info d-flex">
                            <div>
                                <h5 class="product-title mb-0">
                                    <a th:href="@{product/detail}" class="product-title-link">Juice
                                        Drinks</a>
                                </h5>

                                <p class="product-p">Nature made another world</p>
                            </div>

                            <small class="product-price text-muted ms-auto mt-auto mb-5">$45</small>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

</main>

<footer th:replace="~{fragments.html::footer}"></footer>

<!-- CART MODAL -->
<div class="modal fade" id="cart-modal" tabindex="-1" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border-0">
            <div class="modal-header flex-column">
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-6 col-12 mt-4 mt-lg-0">
                        <img th:src="@{'/images/product/upload/' + ${product.originalFileName}}"
                             class="img-fluid product-image" alt="">
                    </div>

                    <div class="col-lg-6 col-12 mt-3 mt-lg-0">
                        <h3 class="modal-title" id="exampleModalLabel" th:text="${product.name}">
                            Tree pot</h3>

                        <p class="product-price text-muted mt-3"
                           th:text="'가격 : ' + ${product.price} + ' 원' ">$25</p>

                        <p class="product-p" id="quantityValue">수량: </p>

                        <div class="border-top mt-4 pt-3">
                            <p class="product-p"><strong>총금액 : <span
                                    id="totalValue"></span></strong></p>
                        </div>

                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <div class="row w-50">
                    <button type="button" class="btn custom-btn cart-btn ms-lg-4">Checkout</button>
                </div>
            </div>
        </div>

    </div>
</div>
</body>
<script th:inline="javascript">
    const selectElement = document.querySelector('#inputGroupSelect01');
    const quantityValue = document.querySelector('#quantityValue');
    const totalValue = document.querySelector('#totalValue');

    selectElement.addEventListener('change', (event) => {
        const selectedQuantity = event.target.value;
        /*<![CDATA[*/
        const productPrice = /*[[${product.price}]]*/;
        /*]]*/
        const totalPrice = selectedQuantity * productPrice;

        quantityValue.textContent = '수량: ' + selectedQuantity;
        totalValue.textContent = totalPrice + ' 원';
    });
</script>
</html>